<app-header></app-header>

<div class="appointment-container">
  <div class="appointment-card shadow-lg rounded-4 p-4">

    <h2 class="text-center text-primary mb-4">
      <i class="bi bi-calendar2-heart-fill"></i> Book an Appointment
    </h2>

    <form #appointmentForm="ngForm" (ngSubmit)="submitAppointment()" novalidate>

      <!-- Full Name -->
      <div class="mb-3">
        <label>Full Name</label>
        <input type="text" name="fullName" [(ngModel)]="appointment.fullName" class="form-control" required>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <label>Email</label>
        <input type="email" name="email" [(ngModel)]="appointment.email" class="form-control" required>
      </div>

      <!-- Gender -->
      <div class="mb-3">
        <label>Gender</label>
        <div class="d-flex gap-3">
          <label><input type="radio" name="gender" value="Male" [(ngModel)]="appointment.gender" required> Male</label>
          <label><input type="radio" name="gender" value="Female" [(ngModel)]="appointment.gender" required>
            Female</label>
          <label><input type="radio" name="gender" value="Other" [(ngModel)]="appointment.gender" required>
            Other</label>
        </div>
      </div>

      <!-- Age & Contact -->
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label>Age</label>
          <input type="number" name="age" [(ngModel)]="appointment.age" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label>Contact Number</label>
          <input type="tel" name="contact" [(ngModel)]="appointment.contact" class="form-control" required>
        </div>
      </div>

      <!-- Speciality -->
      <div class="mb-3">
        <label>Select Speciality</label>
        <select name="speciality" [(ngModel)]="appointment.speciality" class="form-select" required>
          <option value="" disabled selected>Select Speciality</option>
          <option *ngFor="let s of specialities" [value]="s.title">{{ s.title }}</option>
        </select>
      </div>

      <!-- Date & Time -->
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label>Date</label>
          <input type="date" name="date" [(ngModel)]="appointment.date" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label>Time Slot</label>
          <select name="time" [(ngModel)]="appointment.time" class="form-select" required>
            <option value="" disabled selected>Select Time Slot</option>
            <option>09:00 AM - 11:00 AM</option>
            <option>11:00 AM - 01:00 PM</option>
            <option>02:00 PM - 04:00 PM</option>
            <option>04:00 PM - 06:00 PM</option>
          </select>
        </div>
      </div>

      <!-- Message -->
      <div class="mb-3">
        <label>Message (Optional)</label>
        <textarea name="message" [(ngModel)]="appointment.message" class="form-control" rows="3"></textarea>
      </div>

      <!-- Terms -->
      <div class="mb-3 form-check">
        <input type="checkbox" name="terms" [(ngModel)]="appointment.terms" class="form-check-input" required>
        <label class="form-check-label">I agree to the terms and conditions</label>
      </div>

      <!-- Submit -->
      <div class="text-center">
        <button type="submit" class="btn btn-success" [disabled]="!appointmentForm.valid">Book Appointment</button>
      </div>

    </form>

    <!-- Receipt -->
    <div *ngIf="showReceipt" id="receipt" class="mt-4 p-3 border rounded">
      <h4 class="text-primary mb-2">Appointment Receipt</h4>
      <p><strong>Name:</strong> {{ appointment.fullName }}</p>
      <p><strong>Email:</strong> {{ appointment.email }}</p>
      <p><strong>Gender:</strong> {{ appointment.gender }}</p>
      <p><strong>Age:</strong> {{ appointment.age }}</p>
      <p><strong>Contact:</strong> {{ appointment.contact }}</p>
      <p><strong>Speciality:</strong> {{ appointment.speciality }}</p>
      <p><strong>Date:</strong> {{ appointment.date }}</p>
      <p><strong>Time:</strong> {{ appointment.time }}</p>
      <p *ngIf="appointment.message"><strong>Message:</strong> {{ appointment.message }}</p>
      <p><strong>Status:</strong> âœ… Confirmed</p>
      <button class="btn btn-primary mt-2" (click)="printReceipt()">Print Receipt</button>
    </div>

  </div>
</div>